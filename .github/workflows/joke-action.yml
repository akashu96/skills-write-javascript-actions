name: Joke Action
run-name: Dad joke for issue${{ github.event.issue.number }} by ${{ github.event.comment.user.login }}

on:
  issue_comment: 
    types: [created]

permissions: 
  issues: write
  contents: read

jobs:
  joke: 
    if: startsWith(github.event.comment.body, '/joke')
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v4
      
      - name: Get Joke
        id: get-Joke
        uses: ./
      
      - name: Create comment
        uses: peter-evans/create-or-update-comment@v5
        with:
          issue-number: ${{ github.event.issue.number }}
          body: ${{ steps.get-Joke.outputs.joke }}
